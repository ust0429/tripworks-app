# アテンダープロフィール機能実装ドキュメント

## 概要

echo アプリにアテンダープロフィール機能を実装しました。この機能により、アテンダーは自分のプロフィールを表示・編集できるようになり、自己紹介や体験サンプル、利用可能時間などを管理できるようになります。

## 主要機能

1. **プロフィール表示**
   - 基本情報（名前、メール、電話番号など）の表示
   - 専門分野とスキルの表示
   - 評価とレビュー数の表示
   - SNSリンクの表示
   - アテンダーの認証ステータス表示

2. **プロフィール編集**
   - 基本情報の編集
   - プロフィール画像・ヘッダー画像のURL設定
   - 専門分野と言語の選択
   - SNSリンクの追加・編集・削除

3. **体験サンプル管理**
   - 体験サンプルの表示（タイトル、説明、所要時間、価格など）
   - 体験サンプルの追加・編集・削除機能

4. **利用可能時間管理**
   - 曜日ごとの利用可能時間設定
   - 時間範囲の設定（開始時間・終了時間）

## 実装したファイル

### 型定義

- `src/types/attender/profile/index.ts` - アテンダープロフィール関連の型定義

### コンテキスト・サービス

- `src/contexts/AttenderProfileContext.tsx` - プロフィールデータの状態管理
- `src/services/AttenderProfileService.ts` - プロフィールデータの取得・更新API

### コンポーネント

- `src/components/attender/profile/AttenderProfile.tsx` - プロフィール表示画面
- `src/components/attender/profile/AttenderProfileEdit.tsx` - プロフィール編集画面
- `src/components/attender/profile/ProfileHeader.tsx` - プロフィールヘッダー部分
- `src/components/attender/profile/ExperienceSamples.tsx` - 体験サンプル管理
- `src/components/attender/profile/AvailabilityCalendar.tsx` - 利用可能時間管理
- `src/components/attender/profile/index.ts` - コンポーネントエクスポート設定

### ページ

- `src/pages/attender/profile/index.tsx` - プロフィールページ

### UIコンポーネント

- `src/components/ui/badge.tsx` - バッジコンポーネント
- `src/components/ui/skeleton.tsx` - スケルトンローディングコンポーネント

### ユーティリティ

- `src/utils/cn.ts` - クラス名結合ユーティリティ

## 使用方法

### プロフィールの表示

アテンダーのプロフィールを表示するには、`/attender/profile` URLにアクセスします。

### プロフィール編集

1. プロフィールページの「プロフィールを編集」ボタンをクリックすると編集モードに切り替わります。
2. 各タブ（基本情報、詳細情報、SNSリンク）で必要な情報を編集します。
3. 「変更を保存」ボタンをクリックすると変更が保存されます。

### 体験サンプルの管理

1. 体験サンプルセクションの「新規体験を追加」ボタンをクリックします。
2. タイトル、説明、所要時間、料金などを入力します。
3. 既存の体験サンプルは「編集」「削除」ボタンで管理できます。

### 利用可能時間の管理

1. 利用可能時間セクションの「編集」ボタンをクリックします。
2. 各曜日のトグルスイッチで利用可能/不可を切り替えます。
3. 利用可能な曜日は時間範囲を設定できます。
4. 「保存」ボタンで変更を保存します。

## 技術的詳細

### データフロー

1. `AttenderProfileProvider`がプロフィールデータを取得・管理します。
2. `AttenderProfileService`を通じてAPIと通信します（開発環境ではローカルストレージを使用）。
3. 子コンポーネントは`useAttenderProfile`フックでデータにアクセスします。

### 状態管理

- プロフィールデータは`AttenderProfileContext`で中央管理されています。
- 編集モードの切り替えもコンテキストで管理しています。
- API通信中のローディング状態やエラーも含まれています。

### エラーハンドリング

- データ取得エラーはコンテキストに記録され、UIでユーザーに表示されます。
- フォーム送信エラーも適切に処理され、ユーザーに通知されます。

### レスポンシブデザイン

- すべてのコンポーネントはモバイルファーストで設計されています。
- グリッドレイアウトと柔軟なコンポーネントでさまざまな画面サイズに対応しています。

## 今後の改善点

1. **画像アップロード機能**
   - 現在はURLのみをサポートしていますが、直接画像をアップロードする機能を追加予定です。

2. **プレビュー機能**
   - 編集中のプロフィールをプレビューできる機能を検討中です。

3. **統計情報の表示**
   - 体験履歴、予約数、収益などの統計情報を表示する機能を追加予定です。

4. **通知連携**
   - プロフィール更新時の通知機能を実装予定です。

5. **認証・権限強化**
   - 現在は認証チェックのプレースホルダーのみ実装していますが、本格的な認証・権限システムと連携予定です。

## トラブルシューティング

1. **プロフィールが読み込まれない場合**
   - ブラウザの開発者ツールでネットワークエラーを確認してください。
   - 認証情報が正しいか確認してください。

2. **変更が保存されない場合**
   - すべての必須フィールドが入力されているか確認してください。
   - APIエラーが発生していないか確認してください。

3. **レイアウトが崩れる場合**
   - ブラウザのキャッシュをクリアして再試行してください。
   - 最新のCSSが適用されているか確認してください。

## まとめ

アテンダープロフィール機能の実装により、echoアプリのアテンダーは自分のプロフィールを充実させることができるようになりました。これにより、ユーザーはアテンダーの情報をより詳細に知ることができ、より良いマッチングが期待できます。段階的登録機能との連携により、スムーズな導入体験も実現しています。
