# キャンセルボタンの保存ボタンへの置き換え実装レポート

## 実装概要

「echo」アプリのアテンダー登録フォームにおいて、ユーザーエクスペリエンスを向上させるため、以下の変更を実装しました：

- キャンセルボタンを削除
- 代わりに「保存してホームへ」ボタンを追加

この変更により、ユーザーはフォームの途中で作業を中断する場合でも、入力内容を失うことなく保存してホーム画面に戻ることができるようになりました。

## 実装詳細

`AttenderApplicationForm.tsx` において、以下の修正を行いました：

```diff
- <button
-   type="button"
-   onClick={() => {
-     // キャンセル確認とナビゲーション
-     cancelWithConfirmation('入力内容が保存されずに失われますが、申請をキャンセルしますか？');
-   }}
-   className="px-4 py-2 rounded-md border border-red-300 text-red-600 hover:bg-red-50"
- >
-   キャンセル
- </button>
+ <button
+   type="button"
+   onClick={async () => {
+     // 入力内容を保存してからホームに戻る
+     await saveDraft();
+     navigateToHome();
+   }}
+   className="px-4 py-2 rounded-md border border-green-300 text-green-600 hover:bg-green-50 flex items-center"
+ >
+   <svg xmlns="http://www.w3.org/2000/svg" className="h-4 w-4 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
+     <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4" />
+   </svg>
+   保存してホームへ
+ </button>
```

## 主な変更点

1. **機能の変更**：
   - 前: キャンセル確認後に入力内容を破棄
   - 後: 入力内容を保存してからホームに移動

2. **UI/UXの改善**：
   - 色の変更: 警告的な赤色から積極的な緑色へ
   - アイコンの追加: 保存を示す直感的なアイコン
   - ラベルの変更: 「キャンセル」から「保存してホームへ」へ変更し、意図を明確化

3. **技術的な変更**：
   - saveDraft 関数を非同期で実行し、保存完了を待ってからナビゲーション
   - cancelWithConfirmation 関数の代わりに navigateToHome 関数を使用

## 改善効果

この変更により、以下の改善効果が期待されます：

1. **ユーザー体験の向上**：
   - 作業中断時のデータ損失リスクの低減
   - ユーザーの意図に沿った直感的な操作フロー

2. **継続率の向上**：
   - 一時的に作業を中断しても、後で続きから再開できることをユーザーに明示
   - フォーム入力の途中離脱による登録完了率の低下を防止

3. **不安軽減効果**：
   - 「キャンセル」という否定的なニュアンスの表現を避け、ポジティブな行動を促進
   - 保存機能を明示することでユーザーの安心感を向上

## 今後の検討事項

1. **保存完了通知**：
   - 保存が成功したことをトースト通知などで明示的に知らせる機能の追加

2. **再開フローの最適化**：
   - ホーム画面から保存済みの申請フォームに戻るための導線の明確化
   - 再開時のオンボーディングメッセージの実装

## 結論

今回の実装により、アテンダー登録フォームにおいてユーザーが途中で作業を中断する際のフローが改善されました。入力内容を保存してホームに戻るという明確な選択肢を提供することで、ユーザーフレンドリーなインターフェースとなりました。

この変更は、途中段階での離脱によるデータ損失を防ぎ、ユーザーが後で申請プロセスを続行しやすくするための重要なステップです。
